{"version":3,"sources":["services/persons.js","components/Filter.js","components/Person_form.js","components/Person.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","value","onChange","PersonForm","names","values","onChanges","onSubmit","map","name","i","key","type","Persons","persons","deletePerson","person","number","onClick","Notification","message","className","content","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","newMessage","setNewMessage","useEffect","personService","initialPersons","createPerson","personObject","Math","max","p","concat","setTimeout","updatePerson","find","changedPerson","returnedPerson","catch","error","console","log","filter","n","personsToShow","length","toLowerCase","includes","event","target","preventDefault","some","alert","window","confirm","Person","ReactDOM","render","document","getElementById"],"mappings":"qPACMA,EAAU,eAwBD,EAtBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAoB5B,EAjBA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAClB,OAAOA,EAASC,SAcL,EALA,SAACG,EAAIF,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAA+BQ,GAAMF,GACtCH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAG5B,EAVG,SAAAG,GAEhB,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCL5BM,EAVA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACvB,OACE,mDACqB,2BACjBD,MAAOA,EACPC,SAAUA,MCaHC,EAlBI,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,MAAOC,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAC9C,OACE,0BAAMA,SAAUA,GACfH,EAAMI,KAAI,SAACC,EAAMC,GAAP,OACT,yBAAKC,IAAKF,GACPA,EADH,KACU,2BACRR,MAAOI,EAAOK,GACdR,SAAUI,EAAUI,SAIxB,6BACE,4BAAQE,KAAK,UAAb,UCFSC,EAVC,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aAC1B,OACE,oCACGD,EAAQN,KAAI,SAAAQ,GAAM,OACjB,wBAAIL,IAAKK,EAAOnB,IAAKmB,EAAOP,KAA5B,IAAmCO,EAAOC,OAA1C,IAAkD,4BAAQC,QAAS,kBAAMH,EAAaC,EAAOnB,MAA3C,gBCO3CsB,EAXM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAGP,yBAAKC,UAAWD,EAAQR,MACrBQ,EAAQE,UCmIAC,EAnIH,WAAO,IAAD,EACeC,mBAAS,IADxB,mBACRV,EADQ,KACCW,EADD,OAEgBD,mBAAS,IAFzB,mBAERE,EAFQ,KAECC,EAFD,OAGoBH,mBAAS,IAH7B,mBAGRI,EAHQ,KAGGC,EAHH,OAIoBL,mBAAS,IAJ7B,mBAIRM,EAJQ,KAIGC,EAJH,OAKqBP,mBAAS,MAL9B,mBAKRQ,EALQ,KAKIC,EALJ,KAOhBC,qBAAU,WACRC,IAEG3C,MAAK,SAAA4C,GAAc,OAAIX,EAAWW,QACpC,IAEH,IAaMC,EAAe,SAAC5B,EAAMQ,GAC1B,IAAMqB,EAAe,CACnB7B,KAAMA,EACNQ,OAAQA,EACRpB,GAAI0C,KAAKC,IAAL,MAAAD,KAAI,YAASzB,EAAQN,KAAI,SAAAiC,GAAC,OAAIA,EAAE5C,QAAQ,GAG9CsC,EACQG,GACP9C,MAAK,SAAAE,GACJ+B,EAAWX,EAAQ4B,OAAOhD,IAC1BuC,EACE,CAACX,QAAQ,UAAD,OAAY5B,EAAKe,KAAjB,KAA0BG,KAAM,YAE1C+B,YAAW,WACTV,EAAc,QACb,QAELN,EAAW,IACXE,EAAa,KAGTe,EAAe,SAACnC,EAAMmB,GAC1B,IAAMZ,EAASF,EAAQ+B,MAAK,SAAAJ,GAAC,OAAIA,EAAEhC,OAASA,KACtCqC,EAAa,eAAQ9B,EAAR,CAAgBC,OAAQW,IAE3CO,EACUW,EAAcjD,GAAIiD,GACzBtD,MAAK,SAAAuD,GACJtB,EAAWX,EAAQN,KAAI,SAAAQ,GAAM,OAAIA,EAAOP,OAASA,EAAOO,EAAS+B,MACjEd,EACE,CAACX,QAAQ,GAAD,OAAKyB,EAAetC,KAApB,mBAA2CG,KAAM,YAE3D+B,YAAW,WACTV,EAAc,QACb,QAEJe,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACZhB,EACE,CAACX,QAAQ,eAAD,OAAiBN,EAAOP,KAAxB,qCAAiEG,KAAM,UAEjF+B,YAAW,WACTV,EAAc,QACb,KACHR,EAAWX,EAAQsC,QAAO,SAAAC,GAAC,OAAIA,EAAE5C,OAASA,SAE9CkB,EAAW,IACXE,EAAa,KAmCTyB,EAAiBxB,EAAUyB,OAAS,EACxCzC,EAAQsC,QAAO,SAAApC,GAAM,OAAIA,EAAOP,KAAK+C,cAAcC,SAAS3B,EAAU0B,kBACtE1C,EAEF,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcM,QAASY,IACvB,kBAAC,EAAD,CAAQ/B,MAAO6B,EAAW5B,SAZH,SAACwD,GAC1B3B,EAAa2B,EAAMC,OAAO1D,UAYxB,uCACA,kBAAC,EAAD,CACEM,SA3GY,SAACmD,GACjBA,EAAME,iBACF9C,EAAQ+C,MAAK,SAAApB,GAAC,OAAIA,EAAEhC,OAASiB,GAAWe,EAAExB,SAAWW,KACvDkC,MAAM,GAAD,OAAIpC,EAAJ,mCACIZ,EAAQ+C,MAAK,SAAApB,GAAC,OAAIA,EAAEhC,OAASiB,KACtCqC,OAAOC,QAAP,UAAkBtC,EAAlB,2EACEkB,EAAalB,EAASE,GACtBsB,QAAQC,KAAI,GAEdd,EAAaX,EAASE,IAmGpBxB,MAAO,CAAC,OAAQ,UAChBC,OAAQ,CAACqB,EAASE,GAClBtB,UAAW,CA1BQ,SAACoD,GACxB/B,EAAW+B,EAAMC,OAAO1D,QAGC,SAACyD,GAC1B7B,EAAa6B,EAAMC,OAAO1D,WAuBxB,uCACE,kBAACgE,EAAD,CAASnD,QAASwC,EAAevC,aAjDlB,SAAAlB,GAEnBsC,EACWtC,GACVL,MAAK,SAAAE,GACJ+B,EAAWX,EAAQsC,QAAO,SAAApC,GAAM,OAAIA,EAAOnB,KAAOA,SAEnDmD,OAAM,SAAAC,GACLhB,EACE,CAACX,QAAQ,eAAD,OAAiBR,EAAQ+B,MAAK,SAAA7B,GAAM,OAAIA,EAAOnB,KAAOA,KAAIY,KAA1D,qCAAmGG,KAAM,UAEnH+B,YAAW,WACTV,EAAc,QACb,KACHR,EAAWX,EAAQsC,QAAO,SAAAC,GAAC,OAAIA,EAAExD,KAAOA,SAE5C8B,EAAW,IACXE,EAAa,S,MChGfqC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.85eb7538.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => {\r\n    return response.data\r\n  })\r\n}\r\n\r\nconst deleteOne = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${'id:', id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deleteOne }","import React from 'react'\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n  return(\r\n    <div>\r\n      filter shown with: <input \r\n        value={value}\r\n        onChange={onChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ names, values, onChanges, onSubmit }) => {\r\n  return(\r\n    <form onSubmit={onSubmit}>\r\n    {names.map((name, i) => \r\n      <div key={name}>\r\n        {name}: <input \r\n        value={values[i]}\r\n        onChange={onChanges[i]}\r\n        />\r\n    </div>\r\n    )}\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n  )\r\n} \r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({ persons, deletePerson }) => {\r\n  return(\r\n    <>\r\n      {persons.map(person =>\r\n        <li key={person.id}>{person.name} {person.number} <button onClick={() => deletePerson(person.id)}>delete</button></li>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n  return (\r\n    <div className={message.type}>\r\n      {message.content}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons' \n\nimport Filter from './components/Filter'\nimport PersonForm from './components/Person_form'\nimport Persons from './components/Person'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ newMessage, setNewMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (persons.some(p => p.name === newName && p.number === newNumber)){\n      alert(`${newName} is already added to phonebook`)\n    } else if (persons.some(p => p.name === newName)){\n      window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`) \n      ? updatePerson(newName, newNumber)\n      : console.log(false)\n    } else {\n      createPerson(newName, newNumber)\n    }\n  }\n\n  const createPerson = (name, number) => {\n    const personObject = {\n      name: name,\n      number: number,\n      id: Math.max(...(persons.map(p => p.id))) + 1\n    }\n\n    personService\n    .create(personObject)\n    .then(data => {\n      setPersons(persons.concat(data))\n      setNewMessage(\n        {content: `Added '${data.name}'`, type: 'success'}\n      )\n      setTimeout(() => {\n        setNewMessage(null)\n      }, 5000)\n    })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const updatePerson = (name, newNumber) => {\n    const person = persons.find(p => p.name === name)\n    const changedPerson = { ...person, number: newNumber }\n\n    personService\n      .update(changedPerson.id, changedPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.name !== name ? person : returnedPerson))\n        setNewMessage(\n          {content: `${returnedPerson.name} number updated`, type: 'success'}\n        )\n        setTimeout(() => {\n          setNewMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        console.log(error)\n        setNewMessage(\n          {content: `the person '${person.name}' was already deleted from server`, type: 'error'}\n        )\n        setTimeout(() => {\n          setNewMessage(null)\n        }, 5000)\n        setPersons(persons.filter(n => n.name !== name))\n      })\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = id => {\n\n    personService\n    .deleteOne(id)\n    .then(data => {\n      setPersons(persons.filter(person => person.id !== id))\n    })\n    .catch(error => {\n      setNewMessage(\n        {content: `the person '${persons.find(person => person.id === id).name}' was already deleted from server`, type: 'error'}\n      )\n      setTimeout(() => {\n        setNewMessage(null)\n      }, 5000)\n      setPersons(persons.filter(n => n.id !== id))\n    })\n  setNewName('')\n  setNewNumber('')\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const personsToShow = (newFilter.length > 0)\n  ? persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n  : persons\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={newMessage}/>\n      <Filter value={newFilter} onChange={handleFilterChange} />\n      <h2>add new</h2>\n      <PersonForm \n        onSubmit={addPerson}\n        names={['name', 'number']}\n        values={[newName, newNumber]}\n        onChanges={[handleNameChange, handleNumberChange]}\n      />\n      <h2>Numbers</h2>\n        <Persons persons={personsToShow} deletePerson={deletePerson}/>\n    </div>\n  )\n} \n\nexport default App","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}